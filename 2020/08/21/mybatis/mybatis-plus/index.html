<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/header.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/header.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-pace-theme-center-atom.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="概述MyBatis-Plus官方网址 MyBatis-Plus特性:  无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑   损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作 强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatisPlus">
<meta property="og:url" content="http://example.com/2020/08/21/mybatis/mybatis-plus/index.html">
<meta property="og:site_name" content="哈,我是弟弟啊の博客">
<meta property="og:description" content="概述MyBatis-Plus官方网址 MyBatis-Plus特性:  无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑   损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作 强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-08-21T07:17:04.000Z">
<meta property="article:modified_time" content="2021-01-25T07:20:39.502Z">
<meta property="article:author" content="团子">
<meta property="article:tag" content="mybatis">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2020/08/21/mybatis/mybatis-plus/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MyBatisPlus | 哈,我是弟弟啊の博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">哈,我是弟弟啊の博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description"> </p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/21/mybatis/mybatis-plus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="团子">
      <meta itemprop="description" content="<script type="text/javascript" src="https://api.qinor.cn/soup/index.php?encode=js"> </script> <script> qinor() </script>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="哈,我是弟弟啊の博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MyBatisPlus
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-21 15:17:04" itemprop="dateCreated datePublished" datetime="2020-08-21T15:17:04+08:00">2020-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-25 15:20:39" itemprop="dateModified" datetime="2021-01-25T15:20:39+08:00">2021-01-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mybatis%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">mybatis框架</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/">MyBatis-Plus官方网址</a></p>
<p>MyBatis-Plus特性:</p>
<ul>
<li>无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
</ul>
<ul>
<li>损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li>强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>
</ul>
<a id="more"></a>

<ul>
<li>支持 Lambda 形式调用：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li>支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li>支持 ActiveRecord 模式：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li>支持自定义全局通用操作：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li>内置代码生成器：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li>内置分页插件：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li>分页插件支持多种数据库：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li>内置性能分析插件：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li>内置全局拦截插件：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
</ul>
<h1 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/quick-start.html">helloWorld官网地址</a></p>
<p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/19494">慕课网快速入门小例子</a></p>
<h2 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;&#x2F;optional&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.3.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#创建用户表</span><br><span class="line">CREATE TABLE user (</span><br><span class="line">    id BIGINT(20) PRIMARY KEY NOT NULL COMMENT &#39;主键&#39;,</span><br><span class="line">    name VARCHAR(30) DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">    age INT(11) DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">    email VARCHAR(50) DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">    manager_id BIGINT(20) DEFAULT NULL COMMENT &#39;直属上级id&#39;,</span><br><span class="line">    create_time DATETIME DEFAULT NULL COMMENT &#39;创建时间&#39;,</span><br><span class="line">    CONSTRAINT manager_fk FOREIGN KEY (manager_id)</span><br><span class="line">        REFERENCES user (id)</span><br><span class="line">)  ENGINE&#x3D;INNODB CHARSET&#x3D;UTF8;</span><br><span class="line"></span><br><span class="line">#初始化数据：</span><br><span class="line">INSERT INTO user (id, name, age, email, manager_id, create_time)</span><br><span class="line">VALUES (1087982257332887553, &#39;大boss&#39;, 40, &#39;boss@baomidou.com&#39;, NULL, &#39;2019-01-11 14:20:20&#39;),</span><br><span class="line">	(1088248166370832385, &#39;王天风&#39;, 25, &#39;wtf@baomidou.com&#39;, 1087982257332887553	, &#39;2019-02-05 11:12:22&#39;),</span><br><span class="line">	(1088250446457389058, &#39;李艺伟&#39;, 28, &#39;lyw@baomidou.com&#39;, 1088248166370832385	, &#39;2019-02-14 08:31:16&#39;),</span><br><span class="line">	(1094590409767661570, &#39;张雨琪&#39;, 31, &#39;zjq@baomidou.com&#39;, 1088248166370832385	, &#39;2019-01-14 09:15:15&#39;),</span><br><span class="line">	(1094592041087729666, &#39;刘红雨&#39;, 32, &#39;lhm@baomidou.com&#39;, 1088248166370832385	, &#39;2019-01-14 09:48:16&#39;);</span><br></pre></td></tr></table></figure>

<h2 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql:///wty?serverTimezone=UTC</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">warn</span></span><br><span class="line">    <span class="attr">com.wty.mapper:</span> <span class="string">trace</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&#x27;%p%m%n&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="comment">//主键</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">//上级ID</span></span><br><span class="line">    <span class="keyword">private</span> Long managerId;</span><br><span class="line">    <span class="comment">//创建时间</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="主启动类"><a href="#主启动类" class="headerlink" title="主启动类"></a>主启动类</h2><p>在主启动类上要添加包扫描是<code>@MapperScan(&quot;com.wty.mapper&quot;)</code></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootMybatisplusApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">        userList.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h1><p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/19496">慕课网视频</a></p>
<h2 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h2><h3 id="TableName"><a href="#TableName" class="headerlink" title="@TableName"></a>@TableName</h3><p>该注解添加在实体类上,当数据库表名和实体类表明不一致时,可以进行绑定</p>
<h3 id="TableId"><a href="#TableId" class="headerlink" title="@TableId"></a>@TableId</h3><p>mybatisPlus默认识别的主键名称是“id”,当数据库主键字段不是名称为”id”时,可以在实体类的属性上添加此注解,说明是主键。</p>
<h3 id="TableField"><a href="#TableField" class="headerlink" title="@TableField"></a>@TableField</h3><p>当数据库字段和实体类属性名称不一致时，可以添加此注解进行绑定，此注解值为数据库的字段名。</p>
<h3 id="排除非表字段"><a href="#排除非表字段" class="headerlink" title="排除非表字段"></a>排除非表字段</h3><p>三种方式:</p>
<ol>
<li><p>在实体类属性添加关键字<code>transient</code>,表示此属性不参与序列化</p>
</li>
<li><p>在实体类属性添加关键字<code>statis</code></p>
</li>
<li><p>在实体类属性上添加注解<code>@TableField(exist=false)</code>，exist指是否为数据库表字段</p>
</li>
</ol>
<h2 id="条件修改"><a href="#条件修改" class="headerlink" title="条件修改"></a>条件修改</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setAge(<span class="number">33</span>);</span><br><span class="line">userUpdateWrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;小七&quot;</span>);</span><br><span class="line">userMapper.update(user, userUpdateWrapper);</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行sql</span></span><br><span class="line"><span class="comment">//UPDATE user SET age=? WHERE (name = ?) </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//set</span></span><br><span class="line"><span class="comment">//可以不用构建user实例,在update的第一个参数中传入null即可</span></span><br><span class="line">UpdateWrapper&lt;User&gt; userUpdateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">userUpdateWrapper.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;小七&quot;</span>).set(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;34&quot;</span>);</span><br><span class="line">userMapper.update(<span class="keyword">null</span>, userUpdateWrapper);</span><br></pre></td></tr></table></figure>

<h2 id="条件删除"><a href="#条件删除" class="headerlink" title="条件删除"></a>条件删除</h2><p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/19512">慕课网地址</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.&lt;User&gt;lambdaQuery();</span><br><span class="line">wrapper.eq(User::getName,<span class="string">&quot;叶凡&quot;</span>);</span><br><span class="line">userMapper.delete(wrapper);</span><br></pre></td></tr></table></figure>

<h2 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h2><h3 id="批量查询"><a href="#批量查询" class="headerlink" title="批量查询"></a>批量查询</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 查询（根据ID 批量查询）</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> idList 主键ID列表(不能为 null 以及 empty)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">List&lt;T&gt; <span class="title">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span></span>;</span><br></pre></td></tr></table></figure>

<p>批量查询需要传入一个集合，可以使用工具类Arrays，eg:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.asList(<span class="number">1286897820166635521L</span>,<span class="number">1286904334675660802L</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Map查询"><a href="#Map查询" class="headerlink" title="Map查询"></a>Map查询</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 查询（根据 columnMap 条件）</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> columnMap 表字段 map 对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">List&lt;T&gt; <span class="title">selectByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span></span>;</span><br></pre></td></tr></table></figure>

<p>Map的key为数据库的字段名，value为数据库中的数据，eg:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">map.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;杨宁&quot;</span>);</span><br><span class="line">List list = userMapper.selectByMap(map);</span><br><span class="line">list.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h1 id="条件构造器查询"><a href="#条件构造器查询" class="headerlink" title="条件构造器查询"></a>条件构造器查询</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/wrapper.html#abstractwrapper">条件查询官网地址</a></p>
<h2 id="创建条件构造"><a href="#创建条件构造" class="headerlink" title="创建条件构造"></a>创建条件构造</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种创建方式</span></span><br><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line"><span class="comment">//第二种创建方式</span></span><br><span class="line">QueryWrapper&lt;User&gt; query = Wrappers.query();</span><br></pre></td></tr></table></figure>

<h2 id="查询部分字段"><a href="#查询部分字段" class="headerlink" title="查询部分字段"></a>查询部分字段</h2><blockquote>
<p>数据库表中有10条字段,需要查询id,name,email</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper.select(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>).like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;雨&quot;</span>).lt(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;40&quot;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>数据库表中有20条字段,需要排除上级id,创建时间,只查询其他剩余的字段</p>
</blockquote>
<p><code>!info.getColumn().equals(&quot;manager_id&quot;)</code>  表示 排除<code>manager_id</code>字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper.like(&quot;name&quot;, &quot;雨&quot;).lt(&quot;age&quot;, &quot;40&quot;).select(User.class, info-&gt;!info.getColumn().equals(&quot;manager_id&quot;)&amp;&amp;!info.getColumn().equals(&quot;create_time&quot;));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>like的模糊查询,可以分为 likeLeft=&gt;%?    likeRight=&gt; ?%</p>
</blockquote>
<h2 id="condition的使用"><a href="#condition的使用" class="headerlink" title="condition的使用"></a>condition的使用</h2><p><code>condition</code>是一个boolean类型,主要用在条件构造器中,可以控制创建的条件,不加入到sql语句的where中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper&lt;User&gt; wrapper=<span class="keyword">new</span> QueryWrapper();</span><br><span class="line">wrapper.like(StringUtils.isNotColumnName(<span class="string">&quot;name&quot;</span>),<span class="string">&quot;name&quot;</span>,<span class="string">&quot;王&quot;</span>).like(<span class="string">&quot;email&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">userList.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//wrapper.like(StringUtils.isNotColumnName(&quot;name&quot;),&quot;name&quot;,&quot;王&quot;).like(&quot;email&quot;,&quot;&quot;);</span></span><br><span class="line"><span class="comment">//SELECT id,name,age,email,manager_id,create_time FROM user WHERE (email LIKE ?) </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//wrapper.like(&quot;name&quot;,&quot;王&quot;).like(&quot;email&quot;,&quot;&quot;);</span></span><br><span class="line"><span class="comment">//SELECT id,name,age,email,manager_id,create_time FROM user WHERE (name LIKE ? AND email LIKE ?) </span></span><br></pre></td></tr></table></figure>

<h2 id="Lambda构造器"><a href="#Lambda构造器" class="headerlink" title="Lambda构造器"></a>Lambda构造器</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>有三种创建方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过原始条件构造器点出lambda</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;User&gt;().lambda();</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接new实例化</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper1 = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用工具类Wrappers</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper2 = Wrappers.lambdaQuery();</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个LambdaQueryChainWrapper构造器,需要传入一个通用mapper</span></span><br><span class="line">LambdaQueryChainWrapper&lt;User&gt; wrapper3 = <span class="keyword">new</span> LambdaQueryChainWrapper&lt;&gt;(userMapper);</span><br></pre></td></tr></table></figure>

<h3 id="使用LambdaQueryWrapper"><a href="#使用LambdaQueryWrapper" class="headerlink" title="使用LambdaQueryWrapper"></a>使用LambdaQueryWrapper</h3><p>使用lambda条件构造器,创建有一个条件时,例如<code>like(User::getName,&quot;雨&quot;)</code>,前面跟实体类的get方法,后面跟参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.&lt;User&gt;lambdaQuery();</span><br><span class="line"><span class="comment">// WHERE (name LIKE %雨% AND age &lt; 32)</span></span><br><span class="line">wrapper.like(User::getName,<span class="string">&quot;雨&quot;</span>).lt(User::getAge,<span class="number">32</span>);</span><br><span class="line">List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">userList.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h3 id="使用LambdaQueryWrapper-1"><a href="#使用LambdaQueryWrapper-1" class="headerlink" title="使用LambdaQueryWrapper"></a>使用LambdaQueryWrapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; list = <span class="keyword">new</span> LambdaQueryChainWrapper&lt;&gt;(userMapper).like(User::getName, <span class="string">&quot;雨&quot;</span>).lt(User::getAge, <span class="number">40</span>).list();</span><br><span class="line">list.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="关键字一览表"><a href="#关键字一览表" class="headerlink" title="关键字一览表"></a>关键字一览表</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/amberbar/p/12152838.html">摘抄自amberbar的博客</a></p>
<table>
<thead>
<tr>
<th align="center">查询方式</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">setSqlSelect</td>
<td align="center">设置 SELECT 查询字段</td>
</tr>
<tr>
<td align="center">where</td>
<td align="center">WHERE 语句，拼接 + WHERE 条件</td>
</tr>
<tr>
<td align="center">and</td>
<td align="center">AND 语句，拼接 + AND 字段=值</td>
</tr>
<tr>
<td align="center">andNew</td>
<td align="center">AND 语句，拼接 + AND (字段=值)</td>
</tr>
<tr>
<td align="center">or</td>
<td align="center">OR 语句，拼接 + OR 字段=值</td>
</tr>
<tr>
<td align="center">orNew</td>
<td align="center">OR 语句，拼接 + OR (字段=值)</td>
</tr>
<tr>
<td align="center">eq</td>
<td align="center">等于=</td>
</tr>
<tr>
<td align="center">allEq</td>
<td align="center">基于 map 内容等于=</td>
</tr>
<tr>
<td align="center">ne</td>
<td align="center">不等于&lt;&gt;</td>
</tr>
<tr>
<td align="center">gt</td>
<td align="center">大于&gt;</td>
</tr>
<tr>
<td align="center">ge</td>
<td align="center">大于等于&gt;=</td>
</tr>
<tr>
<td align="center">lt</td>
<td align="center">小于&lt;</td>
</tr>
<tr>
<td align="center">le</td>
<td align="center">小于等于&lt;=</td>
</tr>
<tr>
<td align="center">like</td>
<td align="center">模糊查询 LIKE</td>
</tr>
<tr>
<td align="center">notLike</td>
<td align="center">模糊查询 NOT LIKE</td>
</tr>
<tr>
<td align="center">in</td>
<td align="center">IN 查询</td>
</tr>
<tr>
<td align="center">notIn</td>
<td align="center">NOT IN 查询</td>
</tr>
<tr>
<td align="center">isNull</td>
<td align="center">NULL 值查询</td>
</tr>
<tr>
<td align="center">isNotNull</td>
<td align="center">IS NOT NULL</td>
</tr>
<tr>
<td align="center">groupBy</td>
<td align="center">分组 GROUP BY</td>
</tr>
<tr>
<td align="center">having</td>
<td align="center">HAVING 关键词</td>
</tr>
<tr>
<td align="center">orderBy</td>
<td align="center">排序 ORDER BY</td>
</tr>
<tr>
<td align="center">ordeByAsc</td>
<td align="center">升序 排序 ORDER BY</td>
</tr>
<tr>
<td align="center">orderByDesc</td>
<td align="center">降序 排序 ORDER BY</td>
</tr>
<tr>
<td align="center">exists</td>
<td align="center">EXISTS 条件语句</td>
</tr>
<tr>
<td align="center">notExists</td>
<td align="center">NOT EXISTS 条件语句</td>
</tr>
<tr>
<td align="center">between</td>
<td align="center">BETWEEN 条件语句</td>
</tr>
<tr>
<td align="center">notBetween</td>
<td align="center">NOT BETWEEN 条件语句</td>
</tr>
<tr>
<td align="center">addFilter</td>
<td align="center">自由拼接 SQL</td>
</tr>
<tr>
<td align="center">last</td>
<td align="center">拼接在最后，例如：last(“LIMIT 1”)</td>
</tr>
<tr>
<td align="center">apply</td>
<td align="center">拼接sql</td>
</tr>
</tbody></table>
<h1 id="自定义Sql带分页"><a href="#自定义Sql带分页" class="headerlink" title="自定义Sql带分页"></a>自定义Sql带分页</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p><a target="_blank" rel="noopener" href="https://baomidou.com/guide/wrapper.html#%E4%BD%BF%E7%94%A8-wrapper-%E8%87%AA%E5%AE%9A%E4%B9%89sql">官网地址</a></p>
<p>MP3.0.7版本以后,才会有自定义sql</p>
<h2 id="注解版"><a href="#注解版" class="headerlink" title="注解版"></a>注解版</h2><h3 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h3><ol>
<li><code>Constants.WRAPPER</code>是一个固定写法</li>
<li>参数<code>Wrapper</code>是<code>com.baomidou.mybatisplus.core.conditions.Wrapper</code>包下面的</li>
<li>sql语句中<code>ew.customSqlSegment</code>是固定写法,<code>ew</code>指的就是<code>Constants.WRAPPER</code></li>
<li>sql语句中 不用加<code>where</code>关键字</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">selectAll</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; wrapper)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.&lt;User&gt;lambdaQuery();</span><br><span class="line">wrapper.like(User::getName,<span class="string">&quot;雨&quot;</span>).lt(User::getAge,<span class="number">32</span>);</span><br><span class="line">List&lt;User&gt; userList = userMapper.selectAll(wrapper);</span><br><span class="line">userList.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="xml版"><a href="#xml版" class="headerlink" title="xml版"></a>xml版</h2><h3 id="mapper接口"><a href="#mapper接口" class="headerlink" title="mapper接口"></a>mapper接口</h3><p>page需要放在第一个参数位置上,</p>
<p> @Param(Constants.WRAPPER)是固定写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPage&lt;ShareVO&gt; detailed(Page&lt;ShareVO&gt; page, @Param(Constants.WRAPPER) Wrapper&lt;ShareVO&gt; wrapper);</span><br></pre></td></tr></table></figure>

<h3 id="yaml配置xml文件位置"><a href="#yaml配置xml文件位置" class="headerlink" title="yaml配置xml文件位置"></a>yaml配置xml文件位置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">mapper-locations:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="xml编写"><a href="#xml编写" class="headerlink" title="xml编写"></a>xml编写</h3><p>编写玩sql语句后,需要在最后添加${ew.customSqlSegment}</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wty.bean.User&quot;</span>&gt;</span></span><br><span class="line">	select * from user $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/page.html">分页官网地址</a></p>
<h2 id="引入分页插件"><a href="#引入分页插件" class="headerlink" title="引入分页插件"></a>引入分页插件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回List类型查询"><a href="#返回List类型查询" class="headerlink" title="返回List类型查询"></a>返回List类型查询</h2><blockquote>
<p>特别注意</p>
<p>代码<code>Page&lt;User&gt; userPage = new Page&lt;&gt;(1, 2)</code>中,<code>1</code>指的是<code>当前页</code>,指的是页数,<code>2</code>指的是本页数据展示的条数</p>
<p>mysql中的<code>limit 0,3</code>中,<code>0</code>指的是<code>第几条数据</code>而不是当前页</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看第1页,每页2条数据</span></span><br><span class="line">Page&lt;User&gt; userPage = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">wrapper.gt(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line"></span><br><span class="line">Page&lt;User&gt; page = userMapper.selectPage(userPage, wrapper);</span><br><span class="line">System.out.println(<span class="string">&quot;本页数据的条数==&quot;</span> + page.getSize());</span><br><span class="line">System.out.println(<span class="string">&quot;所有数据的详细信息==&quot;</span> + page.getRecords());</span><br><span class="line">System.out.println(<span class="string">&quot;数据的总个数==&quot;</span> + page.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;总页数,即最后一页==&quot;</span> + page.getPages());</span><br></pre></td></tr></table></figure>

<h2 id="返回Map类型查询"><a href="#返回Map类型查询" class="headerlink" title="返回Map类型查询"></a>返回Map类型查询</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; mapIPage = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">wrapper.gt(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line"></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; page = userMapper.selectMapsPage(mapIPage, wrapper);</span><br><span class="line">System.out.println(<span class="string">&quot;本页数据的条数==&quot;</span> + page.getSize());</span><br><span class="line">System.out.println(<span class="string">&quot;所有数据的详细信息==&quot;</span> + page.getRecords());</span><br><span class="line">System.out.println(<span class="string">&quot;数据的总个数==&quot;</span> + page.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;总页数,即最后一页==&quot;</span> + page.getPages());</span><br></pre></td></tr></table></figure>

<h1 id="AR模式"><a href="#AR模式" class="headerlink" title="AR模式"></a>AR模式</h1><p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/19513">慕课网视频</a></p>
<blockquote>
<p>AR模式,可以直接通过操作实体类来操作数据库</p>
<ol>
<li>实体类继承Model&lt;&gt;类</li>
<li>继承通用mapper</li>
<li>通过实体类操作数据库</li>
</ol>
</blockquote>
<h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//构造实体类</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;裴元&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">35</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;py@baomidou.com&quot;</span>);</span><br><span class="line">    user.setCreateTime(LocalDate.now());</span><br><span class="line">    user.setManagerId(<span class="number">1088248166370832385L</span>);</span><br><span class="line">    <span class="comment">//插入操作</span></span><br><span class="line">    <span class="keyword">boolean</span> insert = user.insert();</span><br><span class="line">    System.out.println(<span class="string">&quot;插入是否成功==&gt;&quot;</span> + insert);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    User user1 = user.selectById(<span class="number">1287665164459372546L</span>);</span><br><span class="line">    <span class="comment">//两个对象不一样</span></span><br><span class="line">    System.out.println(user == user1);</span><br><span class="line">    System.out.println(user1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setAge(<span class="number">40</span>);</span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> UpdateWrapper&lt;&gt;();</span><br><span class="line">    updateWrapper.eq(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;裴元&quot;</span>);</span><br><span class="line">    user.update(updateWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; deleteWrapper = Wrappers.lambdaQuery();</span><br><span class="line">    deleteWrapper.eq(User::getName,<span class="string">&quot;裴元&quot;</span>);</span><br><span class="line">    user.delete(deleteWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*如果没有设置id,执行插入操作</span></span><br><span class="line"><span class="comment">*如果设置了id,就进行修改操作</span></span><br><span class="line"><span class="comment">*设置了一个不存在的id,会进行插入操作</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertOrUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;张强&quot;</span>);</span><br><span class="line">    user.setId(<span class="number">1286897820166635521L</span>);</span><br><span class="line">    user.setAge(<span class="number">40</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;123@qq.com&quot;</span>);</span><br><span class="line">    user.setCreateTime(LocalDate.now());</span><br><span class="line">    user.setManagerId(<span class="number">1088248166370832385L</span>);</span><br><span class="line">    user.insertOrUpdate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="MP配置"><a href="#MP配置" class="headerlink" title="MP配置"></a>MP配置</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/config/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">官网地址</a></p>
<p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/19515">慕课网视频地址</a></p>
<h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><h3 id="configLocation"><a href="#configLocation" class="headerlink" title="configLocation"></a>configLocation</h3><p><code>configLocation</code>与<code>mapUnderscoreToCamelCase</code>不能同时定义</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span> <span class="string">classpath:mybatisConfig.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="mapperLocations"><a href="#mapperLocations" class="headerlink" title="mapperLocations"></a>mapperLocations</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># 多模块配置</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:/mapper/**/*.xml</span></span><br><span class="line">  <span class="comment"># 单模块配置</span></span><br><span class="line">  <span class="attr">mapper-locations:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="typeAliasesPackage"><a href="#typeAliasesPackage" class="headerlink" title="typeAliasesPackage"></a>typeAliasesPackage</h3><p>别名配置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.wty.bean</span></span><br></pre></td></tr></table></figure>

<h3 id="mapUnderscoreToCamelCase"><a href="#mapUnderscoreToCamelCase" class="headerlink" title="mapUnderscoreToCamelCase"></a>mapUnderscoreToCamelCase</h3><p>驼峰命名,默认是<code>true</code>,取值是四个范围<code>true</code>,<code>false</code>,<code>on</code> ,<code>off</code></p>
<p><code>configLocation</code>与<code>mapUnderscoreToCamelCase</code>不能同时定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    map-underscore-to-camel-case: true</span><br></pre></td></tr></table></figure>

<h1 id="主键策略"><a href="#主键策略" class="headerlink" title="主键策略"></a>主键策略</h1><p><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/id-generator.html#spring-boot">官方地址</a></p>
<blockquote>
<ol>
<li>主键策略定义在了枚举类<code>IdType</code>上</li>
<li>局部和全局策略都设置后,局部策略优先</li>
<li>设置全局策略,就不用设置局部策略了</li>
</ol>
</blockquote>
<h2 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h2><ol>
<li><code>com.baomidou.mybatisplus.annotation.IdType</code>类定义了MP的主键策略</li>
<li>局部主键策略使用<code>TableId</code>注解来进行设置</li>
<li>全局主键策略在yaml中直接配置就行</li>
<li>局部策略优先于全局策略</li>
</ol>
<h2 id="局部"><a href="#局部" class="headerlink" title="局部"></a>局部</h2><p><code>@TableId</code>中可以设置主键的自增方式</p>
<p><code>ASSIGN_UUID</code>类型的主键,需要把实体类主键设置成<code>String</code>类型,把数据库主键设置成<code>varchar</code>类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">IdType</span> </span>&#123;</span><br><span class="line">    AUTO(<span class="number">0</span>),  <span class="comment">//自动</span></span><br><span class="line">    NONE(<span class="number">1</span>), <span class="comment">//不增</span></span><br><span class="line">    INPUT(<span class="number">2</span>), <span class="comment">//手动增加,需要在增加实体类的时候,手动Set一个id</span></span><br><span class="line">    ASSIGN_ID(<span class="number">3</span>),</span><br><span class="line">    ASSIGN_UUID(<span class="number">4</span>),</span><br><span class="line">    ID_WORKER(<span class="number">3</span>), <span class="comment">//默认的全局唯一ID</span></span><br><span class="line">    ID_WORKER_STR(<span class="number">3</span>),<span class="comment">//字符串表示法的全局唯一ID</span></span><br><span class="line">    UUID(<span class="number">4</span>); <span class="comment">//全局唯一ID,需要实体类id是String类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//eg</span></span><br><span class="line"><span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<h2 id="全局"><a href="#全局" class="headerlink" title="全局"></a>全局</h2><blockquote>
<p>局部策略优先于全局策略</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">id_worker</span></span><br></pre></td></tr></table></figure>

<h1 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h1><h2 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h2><p><a target="_blank" rel="noopener" href="https://baomidou.com/guide/logic-delete.html">官网地址</a></p>
<p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/20086">慕课网视频</a></p>
<blockquote>
<p>说明:</p>
<p>只对自动注入的sql起效:</p>
<ul>
<li>插入: 不作限制</li>
<li>查找: 追加where条件过滤掉已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li>
<li>更新: 追加where条件防止更新到已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li>
<li>删除: 转变为 更新</li>
<li>例如:<ul>
<li>删除: <code>update user set deleted=1 where id = 1 and deleted=0</code></li>
<li>查找: <code>select id,name,deleted from user where deleted=0</code></li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="逻辑删除实现"><a href="#逻辑删除实现" class="headerlink" title="逻辑删除实现"></a>逻辑删除实现</h2><p>步骤一</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># 逻辑已删除值(默认为 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># 逻辑未删除值(默认为 0)</span></span><br></pre></td></tr></table></figure>

<p>步骤二</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//逻辑删除标识（0.未删除，1.已删除）</span></span><br><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = userMapper.deleteById(<span class="number">1094592041087729666L</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;影响行数:&quot;</span> + i);</span><br><span class="line"></span><br><span class="line"><span class="comment">//实际执行语句为  UPDATE user SET deleted=1 WHERE id=? AND deleted=0 </span></span><br></pre></td></tr></table></figure>

<h2 id="sql中排除逻辑删除字段"><a href="#sql中排除逻辑删除字段" class="headerlink" title="sql中排除逻辑删除字段"></a>sql中排除逻辑删除字段</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(select = false)</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<h1 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a>自动填充</h1><h2 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h2><p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/20089">慕课网视频</a></p>
<p><a target="_blank" rel="noopener" href="https://baomidou.com/guide/auto-fill-metainfo.html">官网地址</a></p>
<ul>
<li>填充原理是直接给<code>Entity</code>的属性设置值!!!</li>
<li>注解则是指定该属性在对应情况下必有值,如果无值则入库会是<code>null</code></li>
<li><code>MetaObjectHandler</code>提供的默认方法的策略均为:如果属性有值则不覆盖,如果填充值为<code>null</code>则不填充</li>
<li>字段必须声明<code>TableField</code>注解,属性<code>fill</code>选择对应策略,该声明告知<code>Mybatis-Plus</code>需要预留注入<code>SQL</code>字段</li>
<li>填充处理器<code>MyMetaObjectHandler</code>在 Spring Boot 中需要声明<code>@Component</code>或<code>@Bean</code>注入</li>
<li>要想根据注解<code>FieldFill.xxx</code>和<code>字段名</code>以及<code>字段类型</code>来区分必须使用父类的<code>strictInsertFill</code>或者<code>strictUpdateFill</code>方法</li>
<li>不需要根据任何来区分可以使用父类的<code>fillStrategy</code>方法</li>
</ul>
<h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol>
<li>在实体类属性上添加注解,声明这是需要在什么条件下进行填充</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建时间</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"><span class="comment">//修改时间</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updateTime;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>创建自动填充器,在内部进行自动填充实现</p>
<p>要加入<code>@Component</code>注解,声明被spring接管</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * createTime是实体类的属性名</span></span><br><span class="line"><span class="comment">         * hasSetter:当实体类有setCreateTime时才会执行</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">boolean</span> createTime = metaObject.hasSetter(<span class="string">&quot;createTime&quot;</span>);</span><br><span class="line">         <span class="keyword">if</span> (createTime) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  getFieldValByName: 获取修改时间,当修改时间为空,就进行修改操作</span></span><br><span class="line"><span class="comment">         *   Object udpTime是获取到的修改数据</span></span><br><span class="line"><span class="comment">         * 当修改时间不为空,即在实体类修改时手动添加了修改时间,就不会进行自动填充</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Object udpTime = <span class="keyword">this</span>.getFieldValByName(<span class="string">&quot;udpTime&quot;</span>, metaObject);</span><br><span class="line">        <span class="keyword">if</span> (udpTime == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;udpTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 当已经在插入数据的时候,设定了修改时间,此时会获取到修改时间是否为空</span></span><br><span class="line"><span class="comment">         * 如果为空,就进行自动填充</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Object udpTime = <span class="keyword">this</span>.getFieldValByName(<span class="string">&quot;udpTime&quot;</span>, metaObject);</span><br><span class="line">        <span class="keyword">if</span> (udpTime == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;udpTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h1><h2 id="概述-5"><a href="#概述-5" class="headerlink" title="概述"></a>概述</h2><p><a target="_blank" rel="noopener" href="https://baomidou.com/guide/optimistic-locker-plugin.html">官网地址</a></p>
<p><a target="_blank" rel="noopener" href="https://www.imooc.com/video/20092">慕课网地址</a></p>
<p>乐观锁实现方式：</p>
<ul>
<li>取出记录时，获取当前version</li>
<li>更新时，带上这个version</li>
<li>执行更新时， set version = newVersion where version = oldVersion</li>
<li>如果version不对，就更新失败</li>
</ul>
<p>特别说明:</p>
<ul>
<li>支持的数据类型只有:int,Integer,long,Long,Date,Timestamp,LocalDateTime</li>
<li>整数类型下 <code>newVersion = oldVersion + 1</code></li>
<li><code>newVersion</code> 会回写到 <code>entity</code> 中</li>
<li>仅支持 <code>updateById(id)</code> 与 <code>update(entity, wrapper)</code> 方法</li>
<li><strong>在 <code>update(entity, wrapper)</code> 方法下, <code>wrapper</code> 不能复用!!!</strong></li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>分为两步,</p>
<ol>
<li>添加乐观锁的插件<code>OptimisticLockerInterceptor</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> OptimisticLockerInterceptor <span class="title">optimisticLockerInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OptimisticLockerInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在实体类属性上添加<code>@Version</code>注解</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>代码示例</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> QueryWrapper&lt;User&gt; query = Wrappers.query();</span><br><span class="line"> query.eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;张雨琪&quot;</span>);</span><br><span class="line"> <span class="comment">// 通过查询数据库,version版本为1</span></span><br><span class="line"> Integer version = userMapper.selectOne(query).getVersion();</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要修改后的数据</span></span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">user.setAge(<span class="number">32</span>);</span><br><span class="line"><span class="comment">//必须要带版本号</span></span><br><span class="line">user.setVersion(version);</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改操作</span></span><br><span class="line"><span class="keyword">int</span> update = userMapper.update(user, query);</span><br><span class="line">System.out.println(<span class="string">&quot;影响行数&quot;</span> + update);</span><br><span class="line"></span><br><span class="line"><span class="comment">//UPDATE user SET age=?, update_time=?, version=? WHERE (name = ? AND version = ?) </span></span><br></pre></td></tr></table></figure>




































    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>团子
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://example.com/2020/08/21/mybatis/mybatis-plus/" title="MyBatisPlus">http://example.com/2020/08/21/mybatis/mybatis-plus/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-ND</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/mybatis/" rel="tag"><i class="fa fa-tag"></i> mybatis</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/08/01/spring/spring%E6%B3%A8%E8%A7%A3%E7%89%88/" rel="prev" title="spring注解版">
      <i class="fa fa-chevron-left"></i> spring注解版
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/08/22/mybatis/mybatis-plus%E9%80%86%E5%90%91/" rel="next" title="MybatisPlus逆向">
      MybatisPlus逆向 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HelloWorld"><span class="nav-text">HelloWorld</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#maven"><span class="nav-text">maven</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sql"><span class="nav-text">sql</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yaml"><span class="nav-text">yaml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bean"><span class="nav-text">Bean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mapper"><span class="nav-text">Mapper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="nav-text">主启动类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CRUD%E6%93%8D%E4%BD%9C"><span class="nav-text">CRUD操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="nav-text">常用注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TableName"><span class="nav-text">@TableName</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TableId"><span class="nav-text">@TableId</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TableField"><span class="nav-text">@TableField</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E9%99%A4%E9%9D%9E%E8%A1%A8%E5%AD%97%E6%AE%B5"><span class="nav-text">排除非表字段</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="nav-text">条件修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="nav-text">条件删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="nav-text">基本查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%9F%A5%E8%AF%A2"><span class="nav-text">批量查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map%E6%9F%A5%E8%AF%A2"><span class="nav-text">Map查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8%E6%9F%A5%E8%AF%A2"><span class="nav-text">条件构造器查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0"><span class="nav-text">创建条件构造</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E9%83%A8%E5%88%86%E5%AD%97%E6%AE%B5"><span class="nav-text">查询部分字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#condition%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">condition的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">Lambda构造器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8LambdaQueryWrapper"><span class="nav-text">使用LambdaQueryWrapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8LambdaQueryWrapper-1"><span class="nav-text">使用LambdaQueryWrapper</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E4%B8%80%E8%A7%88%E8%A1%A8"><span class="nav-text">关键字一览表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Sql%E5%B8%A6%E5%88%86%E9%A1%B5"><span class="nav-text">自定义Sql带分页</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E7%89%88"><span class="nav-text">注解版</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mapper"><span class="nav-text">mapper</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xml%E7%89%88"><span class="nav-text">xml版</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mapper%E6%8E%A5%E5%8F%A3"><span class="nav-text">mapper接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#yaml%E9%85%8D%E7%BD%AExml%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="nav-text">yaml配置xml文件位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml%E7%BC%96%E5%86%99"><span class="nav-text">xml编写</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-text">分页查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="nav-text">引入分页插件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%94%E5%9B%9EList%E7%B1%BB%E5%9E%8B%E6%9F%A5%E8%AF%A2"><span class="nav-text">返回List类型查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%94%E5%9B%9EMap%E7%B1%BB%E5%9E%8B%E6%9F%A5%E8%AF%A2"><span class="nav-text">返回Map类型查询</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AR%E6%A8%A1%E5%BC%8F"><span class="nav-text">AR模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="nav-text">代码示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MP%E9%85%8D%E7%BD%AE"><span class="nav-text">MP配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="nav-text">基本配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#configLocation"><span class="nav-text">configLocation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mapperLocations"><span class="nav-text">mapperLocations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#typeAliasesPackage"><span class="nav-text">typeAliasesPackage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mapUnderscoreToCamelCase"><span class="nav-text">mapUnderscoreToCamelCase</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E7%AD%96%E7%95%A5"><span class="nav-text">主键策略</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%80%E9%83%A8"><span class="nav-text">局部</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80"><span class="nav-text">全局</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="nav-text">逻辑删除</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%AE%9E%E7%8E%B0"><span class="nav-text">逻辑删除实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sql%E4%B8%AD%E6%8E%92%E9%99%A4%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="nav-text">sql中排除逻辑删除字段</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85"><span class="nav-text">自动填充</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-4"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-text">实现步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%90%E8%A7%82%E9%94%81"><span class="nav-text">乐观锁</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-5"><span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0"><span class="nav-text">实现</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="团子"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">团子</p>
  <div class="site-description" itemprop="description"><script type="text/javascript" src="https://api.qinor.cn/soup/index.php?encode=js"> </script> <script> qinor() </script></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/JavaWty" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JavaWty" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">团子</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

<span id="busuanzi_container_site_uv">
  本站访问次数：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
</span>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
